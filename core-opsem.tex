\begin{figure*}[t!]

\begin{minipage}{\columnwidth}
\textbf{\small RDT Specification Language}\\
\begin{smathpar}
\begin{array}{lclcl}
\multicolumn{5}{c}{
{\tau} \in \mathtt{RDT} \quad
{op} \in \mathtt{Oper} \quad
{v} \in \mathtt{Val}} \\
\multicolumn{5}{c}{
{e} \in \mathtt{Expr} \quad
\cv \in \mathtt{Crtr}} \\
\Ops & \in & \mathtt{OperMap} 	 & \coloneqq & op \mapsto e \\
\Ctrts & \in & \mathtt{CtrtMap} & \coloneqq & op \mapsto \cv \\
\rdtspec & \in & \mathtt{Spec} & \coloneqq & (\tau,\Ops,\Ctrts)\\
\end{array}
\end{smathpar}
\textbf{\small Session Language}\\
\begin{smathpar}
\begin{array}{lclcl}
{v_s} & \in & \mathtt{Val}  	& \coloneqq & v\\
{a_s} & \in & \mathtt{Act} & \coloneqq & op(v_s) \\
{\sigma} & \in & \mathtt{Sess} & \coloneqq & \cdot \ALT a_s; \sigma \\
\end{array}
\end{smathpar}
\end{minipage}
\begin{minipage}{\columnwidth}
\textbf{\small Run-Time Artifacts}\\
\begin{smathpar}
\begin{array}{lclcl}
\multicolumn{5}{c}{{\small
{s} \in \SessID \qquad
{i} \in \EffID \qquad
{r} \in \ReplID }} \\
\eff & \in & \mathtt{Effect} & \coloneqq &  (s,~i,~op,~v)\\
\Theta  & \in & \mathtt{Store}		  & \coloneqq & r \mapsto \set{\eff} \\
\EffSoup & \in & \mathtt{EffSoup}	  & \coloneqq & \set{\eff} \\
\visZ		&	\in & \mathtt{VisRel}			& \coloneqq & \set{\eff}\times\set{\eff} \\
\soZ		&	\in	& \mathtt{SessOrdRel} & \coloneqq & \set{\eff}\times\set{\eff} \\
{\E} 		& \in & \mathtt{ExecState}  & \coloneqq & (\EffSoup,\visZ,\soZ)\\
\Sigma 	& \in & \mathtt{SessSoup}   & \coloneqq &
  \langle s,i,{\sigma} \rangle \pll \Sigma \ALT \emptyset \\
				&			&	\mathtt{Config}		  & \coloneqq & \E;\Theta;\Sigma \\
\end{array}
\end{smathpar}
\textbf{\small Auxiliary Definitions}\\
\begin{smathpar}
\begin{array}{lcl}
\operZ(s,~i,~op,~v) & = & op \\
\ctxtFn(s,~i,~op,~v) & = & (op,~v) \\
\end{array}
\end{smathpar}
\end{minipage}

\vspace{5mm}
\textbf{\small Auxiliary Reductions} \;
  \fbox{\small \(\auxred{\Theta} {(\E,\langle s,i,op(v) \rangle)} {r} {(\E',\eff)}\)}\\

\begin{minipage}{\textwidth}
\rulelabel{Oper}
\begin{smathpar}
\stretcharraybig
\begin{array}{l}
\RuleTwo
{
r \in \dom(\Theta) \qquad
ctxt = {\ctxtFn}^{*}(\Theta(r)) \qquad
\Ops(op)(v,ctxt) {\rdtredsto}^{*} v' \qquad
\eff = (s,~i,~op,~v')\\
\EffSoup' = \{\eff\} \cup \EffSoup \qquad
\visZ' = \Theta(r)\times\{\eff\} \cup \visZ \qquad
\soZ' = \EffSoup_{({\sf SessID}=s,\,{\sf SeqNo}<i)}\times\{\eff\} \cup \soZ
}
{
  \auxred {\Theta} {((\EffSoup,\visZ,\soZ), \langle s,i,op(v) \rangle} {r}
    {((\EffSoup',\visZ',\soZ'),\eff)}
}
\end{array}
\end{smathpar}
\end{minipage}


\vspace{5mm}
\textbf{\small Operational Semantics} \;
  \fbox{\small \(\E;\Theta;\Sigma \;\rightarrow\; \E';\Theta';\Sigma'\)}\\

\begin{minipage}{\columnwidth}
\rulelabel{EffVis}
\begin{smathpar}
\stretcharraybig
\begin{array}{l}
\RuleTwo
{
  \eff \in \EffSoup \quad \eff \notin \Theta(r) \\
  \E.\visZ^{-1}(\eff) \cup \E.\soZ^{-1}(\eff) \subseteq \Theta(r)
  \qquad \Theta' = \Theta[r \mapsto \{\eff\} \cup \Theta(r)]
}
{
  \E;\Theta;\Sigma \;\rightarrow\; \E;\Theta';\Sigma
}
\end{array}
\end{smathpar}
\end{minipage}
\begin{minipage}{\columnwidth}
\rulelabel{HA}
\begin{smathpar}
\stretcharraybig
\begin{array}{l}
\RuleTwo
{
  {\sf EventuallyConsistent}(\Ctrts(op)) \\
  \auxred{\Theta} {(\E,\langle s,i,op(v) \rangle)} {r} {(\E',\eff)}
}
{
  \E;\Theta;\langle s,i,op(v)\; \sigma \rangle \pll \Sigma \;\rightarrow\;
  \E';\Theta; \langle s,i+1,\sigma \rangle\pll \Sigma
}
\end{array}
\end{smathpar}
\end{minipage}

\vspace{5mm}
\begin{minipage}{\columnwidth}
\rulelabel{SA}
\begin{smathpar}
\stretcharraybig
\begin{array}{l}
\RuleTwo
{ \\
  {\sf CausallyConsistent}(\Ctrts(op)) \\
  \auxred{\Theta} {(\E,\langle s,i,op(v) \rangle)} {r} {(\E',\eff)} \qquad
  \E'.\soZ^{-1}(\eff) \subseteq \Theta(r)
}
{\E;\Theta;\langle s,i,op(v); \sigma \rangle \pll \Sigma \;\rightarrow\;
\E';\Theta;\langle s,i+1,\sigma \rangle \pll \Sigma }
\end{array}
\end{smathpar}
\end{minipage}
\begin{minipage}{\columnwidth}
\rulelabel{UA}
\begin{smathpar}
\stretcharraybig
\begin{array}{l}
\RuleTwo
{
  {\sf StronglyConsistent}(\Ctrts(op)) \\
  \auxred{\Theta} {(\E,\langle s,i,op(v) \rangle)} {r} {(\E',\eff)} \qquad
  \E.A \subseteq \Theta(r) \\
  \dom(\Theta') = \dom(\Theta) \qquad
  \forall r'\in \dom(\Theta'). \Theta'(r') = \Theta(r') \cup \{\eff\}
}
{
  \E;\Theta;\langle s,i,op(v); \sigma \rangle \pll \Sigma \;\rightarrow\;
  \E;\Theta';\langle s,i+1,\sigma \rangle \pll \Sigma}
\end{array}
\end{smathpar}
\end{minipage}


\caption{Syntax and operational semantics.}
\label{sem:oper}
\end{figure*}


